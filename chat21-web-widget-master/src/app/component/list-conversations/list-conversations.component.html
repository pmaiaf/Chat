<div id='c21-app-list-conversations'>
  <div *ngFor="let conversation of listConversations | slice:0:limit">
    <button tabindex="1103" class="c21-item-conversation" (click)="openConversationByID(conversation)">
      <div class="c21-body-conv">
        <div class="c21-left-conv">
          <div class="c21-ball" [ngStyle]="{'background': 'linear-gradient(rgb(255,255,255) -125%, ' + conversation.color + ')'}">
            <span class="c21-ball-label">{{conversation?.avatar}}</span>
            <div *ngIf="conversation?.image" #avatarImage class="c21-avatar-image" [style.background-image]="'url(' + conversation.image + ')'"></div>
          </div>
        </div>
        <div class="c21-right-conv">
          <div class="c21-last-time">{{conversation?.timestamp | amTimeAgo}}</div>
          <div class="truncate c21-name">{{conversation?.sender_fullname }}</div>
          
          <!-- --- IMAGE PREVIEW ICON ---- -->
          <div *ngIf="conversation?.type ==='image'" [class.not-read]="conversation?.is_new" class="c21-msg" style="float: left; margin-right: 5px;">
            <svg role="img" aria-labelledby="altIconTitle" xmlns="http://www.w3.org/2000/svg" fill="#000000"
              width="20px" height="20px" viewBox="0 0 24 24">
              <path d="M0 0h24v24H0V0z" fill="none"/>
              <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"/>
            </svg>
          </div>
            <!-- <div [class.not-read]="conversation.is_new" [class.archived]="conversation.archived" class="truncate c21-msg">{{conversation.last_message_text}}</div> -->
            <!-- <div [class.not-read]="conversation.is_new" class="truncate c21-msg" [innerHTML]="conversation.last_message_text"></div> -->
          
          <!-- --- ATTACHMENT ICON ---- -->
          <div *ngIf="conversation.type !== 'image' && conversation.type !== 'text'" [class.not-read]="conversation.is_new" class="c21-msg" style="float: left; margin-right: 5px;">
            <svg role="img" aria-labelledby="altIconTitle" xmlns="http://www.w3.org/2000/svg" fill="#000000"
              width="20px" height="20px" viewBox="0 0 24 24" transform="rotate(45)">
              <path d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z" />
            </svg>
          </div>

          <!-- --- LAST MESSAGE ---- -->
          <div [class.not-read]="conversation.is_new" [class.archived]="conversation.archived" class="truncate c21-msg">{{conversation.last_message_text}}</div>
          <!-- <div *ngIf="conversation.type !=='image'" [class.not-read]="conversation.is_new" [class.archived]="conversation.archived" class="truncate c21-msg" [innerHTML]="conversation.last_message_text"></div> -->
        </div>
        
        <div *ngIf="conversation.is_new" [ngStyle] = "{ 'background-color': stylesMap.get('themeColor') }" class="c21-divBudge">{{conversation.badge}}</div>
        <div  class="c21-icon-archived-chat" *ngIf="conversation.archived">
          <!-- ICON ARCHIVED CHAT  -->
          <button  tabindex="-1" class="c21-header-button c21-right c21-close c21-button-clean">
            <svg role="img" aria-labelledby="altIconTitle" xmlns="http://www.w3.org/2000/svg" fill="#aaaaaa"
              width="24px" height="24px" viewBox="0 0 24 24">
              <path fill="none" d="M0 0h24v24H0z"/>
              <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
              <title id="altIconTitle">{{ translationMap.get('CLOSED') }}</title>
            </svg>
          </button>
        </div>
      </div>
      <div class="clear"></div>
    </button>
    
  </div>
</div>

